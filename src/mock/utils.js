import dayjs from 'dayjs';
import durationPlugin from 'dayjs/plugin/duration';
dayjs.extend(durationPlugin);

const getRandomInteger = (a = 0, b = 50) => {
  const toLower = Math.ceil(Math.min(a, b));
  const toUpper = Math.floor(Math.max(a, b));
  const result = Math.random() * (toUpper - toLower + 1) + toLower;
  return Math.floor(result);
};

const getRandomArrayElement = (elements) => elements[getRandomInteger(0, elements.length - 1)];

const humanizeDueDate = (dueDate, format) => dueDate ? dayjs(dueDate).format(format) : '';

const getDuration = (start, end) => {
  const duration = dayjs.duration(dayjs(end).diff(dayjs(start)));

  if (duration.days()) {
    return duration.format('DD[d] HH[h] mm[m]');
  }
  if (duration.hours()) {
    return duration.format('HH[h] mm[m]');
  }
  return duration.format('mm[m]');
};

export {getRandomInteger, getRandomArrayElement, humanizeDueDate, getDuration};
